<?xml version="1.0" encoding="UTF-8"?>

<screen require-authentication="anonymous-all"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-2.1.xsd">

    <transition name="mksignup">
        <service-call name="MKSignUpServices.create#userAccount" in-map="context" out-map="context"/>
        <actions>
            <script>
                println "-----------------------------------------------------"
                ec.user.loginUser(username, newPassword)
                println "-----------------------------------------------------"
                println "login complete"
            </script>
        </actions>
        <!-- <default-response url="."/> -->
        <default-response url="../MKContactForm"/>
    </transition>

    

    <transition name="json" method="options" require-session-token="false">
        <default-response type="none" />
    </transition>

    <widgets>
        <!-- <render-mode>
            <text type="html,vuet" location="component://MKSignUp/screen/MKSignUp/Pages/MKSignUpForm.html"/>
        </render-mode> -->

        <label type="h1" text="Get Started for Free"/>
        <form-single name="MKSignUpForm" transition="mksignup">
            <field name="firstName"><default-field><text-line size="25"/></default-field></field>
            <field name="lastName"><default-field><text-line size="25"/></default-field></field>
            <field name="username"><default-field><text-line size="25"/></default-field></field>
            <field name="newPassword"><default-field><password/></default-field></field>
            <field name="newPasswordVerify"><default-field><password/></default-field></field>
            <field name="submitButton"><default-field title="Submit"><submit/></default-field></field>
        </form-single>
    </widgets>


</screen> 